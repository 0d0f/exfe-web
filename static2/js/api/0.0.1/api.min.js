define("api",[],function(a,b,c){function h(a,b){function c(){var c=j(arguments),d=c[0];return d&&d.meta.code===200?(c[0]=d.response,a&&a.apply(this,c)):b&&b.apply(this,c),this}return c}function j(a){return i.call(a,0)}function k(a,b){var c;for(c in b)a[c]=b[c];return a}function m(a,b,c){var e={},f;return k(e,l),k(e,a),x=d.ajax(e).done(b).fail(c),x}var d=a("jquery"),e={base_url:"http://api.localexfe.me/v2",signin:"/users/signin",getRegistrationFlag:"/users/getRegistrationFlag",checkAuthorization:"/users/checkAuthorization",getUser:"/users/:user_id",signout:"",updateUser:"/users/update",setPassword:"/users/:user_id/setPassword",crosses:"/users/:user_id/crosses",crosslist:"/users/:user_id/crosslist",addIdentity:"/users/addIdentity",deleteIdentity:"/users/deleteIdentity",setDefaultIdentity:"/users/setDefaultIdentity",getIdentityById:"/identities/:identity_id",getIdentity:"/identities/get",updateIdentity:"/identities/:identity_id/update",getCross:"/crosses/:cross_id",addCross:"/cross/add",editCross:"/cross/:cross_id/edit",rsvp:"/exfee/:exfee_id/rsvp",conversation:"/conversation/:exfee_id",verifyIdentity:"/users/verifyIdentity",verifyUserIdentity:"/users/verifyUserIdentity",forgotPassword:"/users/forgotPassword"},f="signin getRegistrationFlag checkAuthorization verifyIdentity verifyUserIdentity forgotPassword getIdentityById",g={_token:null,setToken:function(a){this._token=a},getToken:function(){return this._token},request:function(a,b,c,i){var j=e[a],k,l,n;if(!j)return;if(!(f.search(a)>-1)){if(!g._token)return;j+="?token="+g._token}if(l=b.params)l=d.param(l),j+="&"+l;if(n=b.resources)for(k in n)j=j.replace(":"+k,encodeURIComponent(n[k]));return b.url=e.base_url+j,delete b.params,delete b.resources,m(b,h(c,i),i)}},i=Array.prototype.slice,l={type:"GET",dataType:"JSON",xhrFields:{withCredentials:!0}};return g});