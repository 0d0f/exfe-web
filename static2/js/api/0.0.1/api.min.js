define("api",[],function(a,b,c){function i(a,b){function c(){var c=k(arguments),d=c[0];return d&&d.meta.code===200?(c[0]=d.response,a&&a.apply(this,c)):b&&b.apply(this,c),this}return c}function k(a){return j.call(a,0)}function l(a,b){var c;for(c in b)a[c]=b[c];return a}function n(a,b,c){var e={},f;return l(e,m),l(e,a),x=d.ajax(e).done(b).fail(c),x}var d=a("jquery"),e=a("config"),f={base_url:e.api_url,signin:"/users/signin",getRegistrationFlag:"/users/getRegistrationFlag",checkAuthorization:"/users/checkAuthorization",getUser:"/users/:user_id",signout:"",updateUser:"/users/update",setPassword:"/users/:user_id/setPassword",crosses:"/users/:user_id/crosses",crosslist:"/users/:user_id/crosslist",addIdentity:"/users/addIdentity",deleteIdentity:"/users/deleteIdentity",setDefaultIdentity:"/users/setDefaultIdentity",getIdentityById:"/identities/:identity_id",getIdentity:"/identities/get",updateIdentity:"/identities/:identity_id/update",getCross:"/crosses/:cross_id",addCross:"/cross/add",editCross:"/cross/:cross_id/edit",rsvp:"/exfee/:exfee_id/rsvp",conversation:"/conversation/:exfee_id",verifyIdentity:"/users/verifyIdentity",verifyUserIdentity:"/users/verifyUserIdentity",forgotPassword:"/users/forgotPassword"},g="signin getRegistrationFlag checkAuthorization verifyIdentity verifyUserIdentity forgotPassword getIdentityById",h={_token:null,setToken:function(a){this._token=a},getToken:function(){return this._token},request:function(a,b,c,e){var j=f[a],k,l,m;if(!j)return;if(!(g.search(a)>-1)){if(!h._token)return;j+="?token="+h._token}if(l=b.params)l=d.param(l),j+="&"+l;if(m=b.resources)for(k in m)j=j.replace(":"+k,encodeURIComponent(m[k]));return b.url=f.base_url+j,delete b.params,delete b.resources,n(b,i(c,e),e)}},j=Array.prototype.slice,m={type:"GET",dataType:"JSON",xhrFields:{withCredentials:!0}};return h});