define(function(a){var b=a("jquery");!function(a){function b(b,c,d){b=a(b),d=a.fn.dndsortable.defaults.dragenterData;if(arguments.length===1)return b.data(d)||0;c?b.data(d,Math.max(0,c)):b.data(d,null)}function c(b,c){var d=a(b).next();d[0]===c?a(b).before(c):(a(c).before(b),d.before(c))}function d(a,b,c,d,e){if(d){var f=a.data("drag-timer");f&&(clearTimeout(f),f=null,f=setTimeout(function(){e(b,c)},d),a.data("drag-timer",f))}else e(b,c)}a.fn.dndsortable=function(e){return e=a.extend({},a.fn.dndsortable.defaults,e),this.each(function(){var f=a(this),g,h,i=f.children(e.items);i.addClass(e.childClass).attr("draggable","true"),f.on("dragstart.ui",e.items,function(b){return b.stopPropagation(),b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="moving",b.originalEvent.dataTransfer.setData("Text",e.setData(this))),g=a(h=this).addClass(e.draggingClass).index(),e.start&&e.start.call(this,g),!0}).on("dragend.ui",e.items,function(c){return c.stopPropagation(),a(this).removeClass(e.draggingClass),e.end&&e.end.call(this,g),g=undefined,h=null,b(this,!1),!1}).on("dragenter.ui",e.items,function(c){if(!h||h===this)return!0;var g=this,i=a(g),j=b(this);return b(this,j+1),j===0&&(i.addClass(e.overClass),e.wrap||d(f,h,this,e.delay,function(b,c){e.enter&&e.enter.call(c),i[a(b).index()<i.index()?"after":"before"](b)})),!1}).on("dragleave.ui",e.items,function(c){var d=b(this);return b(this,d-1),b(this)||(a(this).removeClass(e.overClass),b(this,!1),e.leave&&e.leave.call(this)),!1}).on("drop.ui",e.items,function(a){a.stopPropagation(),a.preventDefault();if(this===h)return;return e.wrap&&d(f,h,this,e.delay,function(b,d){e.sort?e.sort.call(f,b,d):c.call(f,b,d);var g;a.originalEvent.dataTransfer&&(g=a.originalEvent.dataTransfer.getData("Text")),e.change&&e.change.call(d,g)}),!1}).on("dragover.ui",e.items,function(a){return h?(a.stopPropagation(),a.preventDefault(),!1):!0})})},a.fn.dndsortable.defaults={delay:0,wrap:!1,items:"> *",overClass:"sortable-over",placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",childClass:"sortable-child",dragenterData:"child-dragenter",setData:function(){}}}(b)});