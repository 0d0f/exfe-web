define("dialog",[],function(a,b,c){function i(a){var b=this;this.isShown&&this.options.backdrop?(this.$backdrop=d(h).appendTo(this.parentNode),this.$backdrop.click(d.proxy(this.hide,this)),this.$backdrop.addClass("in")):!this.isShown&&this.$backdrop&&(this.$backdrop.removeClass("in"),j.call(this))}function j(){this.$backdrop.remove(),this.$backdrop=null}function k(){var a=this;this.isShown&&this.options.keyboard?f.on("keyup.dismiss.modal",function(b){b.which===27&&a.hide()}):this.isShown||f.off("keyup.dismiss.modal")}var d=a("jquery"),e=a("widget"),f=d(document.body),g=e.extend({options:{keyboard:!0,backdrop:!1,template:'<div class="modal"><div class="modal-header"><button class="close" data-dismiss="dialog">Ã—</button><h3></h3></div><div class="modal-main"><div class="modal-body"></div><div class="modal-footer"></div></div></div>',parentNode:f,srcNode:"",viewData:null,lifecycle:!0},init:function(){},render:function(){var a;this.parentNode=this.options.parentNode,this.srcNode=this.options.srcNode;if(a=this.options.viewData){var b=a.title,c=a.body,e=a.footer,f=a.others,g=a.cls;g&&this.element.addClass(g),b&&this.element.find("h3").eq(0).html(b),c&&this.element.find("div.modal-body").html(c),e&&this.element.find("div.modal-footer").html(e),f&&this.element.find("div.modal-main").append(f)}return this.element.appendTo(this.parentNode),this.element.on("click.dismiss.dialog",'[data-dismiss="dialog"]',d.proxy(this.hide,this)),this.sync(),this},sync:function(){return this.emit("sync"),this},show:function(a){return f.find(".modal").addClass("hide"),this.emit("showBefore",a),this.element.removeClass("hide"),this.isShown=!0,k.call(this),i.call(this),this.element.addClass("in"),this.emit("showAfter",a),this},hide:function(a){return this.emit("hideBefore",a),this.element.addClass("hide"),this.isShown=!1,k.call(this),i.call(this),this.element.removeClass("in"),this.emit("hideAfter",a),this},offSrcNode:function(){this.options.srcNode&&this.options.srcNode.data("dialog",null)}}),h='<div id="js-modal-backdrop" class="modal-backdrop" />';return g});