define("util",[],function(a,b,c){var d=/^\s+/,e=/\s+$/,f=/[^0-9a-zA-Z_\u4e00-\u9fa5\ \'\.]+/g,g=String.prototype.trim,h={zh_CN:f,cut30length:function(a){return a.replace(f," ").substring(0,30)},utf8length:function(a){var b=a.length,c=0,d=0,e;for(;d<b;d++){e=a.charCodeAt(d);if(e<127)c++;else if(e<=2047)c+=2;else if(e<=55295||57344<=e)c+=3;else{if(!(e<=56319))throw"Error: Invalid UTF-16 sequence. Missing high-surrogate code.";e=a.charCodeAt(++d);if(e<56320||57343<e)throw"Error: Invalid UTF-16 sequence. Missing low-surrogate code.";c+=4}return c}},trim:g?function(a){return a===null?"":g.call(a)}:function(a){return a===null?"":a.toString().replace(d,"").replace(e,"")},parseId:function(){function e(e){var f={},g;e=h.trim(e);if(g=e.match(a))f.name=g[1],f.external_identity=g[1]+"@facebook",f.external_username=g[1],f.provider="fackbook";else if(g=e.match(b))f.name=g[1]||g[2],f.external_identity="@"+f.name+"@twitter",f.external_username=f.name,f.provider="twitter";else if(c.test(e))f.name=h.cut30length(e.split("@")[0]),f.external_identity=e,f.provider="email";else if(d.test(e)){var i=e.indexOf("<"),j=e.indexOf(">");f.name=h.cut30length(e.substring(0,i).replace(/^"|^'|"$|'$/g,"")),f.external_identity=e.substring(++i,j),f.provider="email"}else f.name=e,f.provider=null;return f}var a=/^([a-z0-9_]{1,15})@facebook$/i,b=/^@([a-z0-9_]{1,15})$|^@?([a-z0-9_]{1,15})@twitter$/i,c=/^[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,d=/^[^@]*<[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?>$/i;return e}()};return h});