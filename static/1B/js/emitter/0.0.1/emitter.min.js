define("emitter",[],function(a,b,c){function f(){}var d=/\s+/,e=Object.keys;return e||(e=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&(b[b.length]=c);return b}),f.prototype.on=function(a,b,c){var e,f,g;if(!b)return this;a=a.split(d),e=this.__callbacks||(this.__callbacks={});while(f=a.shift())g=e[f]||(e[f]=[]),b.__context=c,g[g.length]=b;return this},f.prototype.once=function(a,b,c){var e,f,g;if(!b)return this;a=a.split(d),e=this.__callbacks||(this.__callbacks={});while(f=a.shift())g=e[f]||(e[f]=[]),b.__once=!0,b.__context=c,g[g.length]=b;return this},f.prototype.off=function(a,b,c){var f,g,h,i,j;if(!(f=this.__callbacks))return this;if(!(a||b||c))return delete this.__callbacks,this;a=a.split(d)||e(f);while(g=a.shift()){h=f[g];if(!h)continue;if(!b&&!c){delete f[g];continue}for(i=h.length-1;i;--i)j=h[i],b&&j!==b||c&&j.__context!==c||h.splice(i,1)}return this},f.prototype.emit=function(a){var b,c,e,f,g,h,i=[],j,k;if(!(b=this.__callbacks))return this;a=a.split(d);for(g=arguments.length-1;g;--g)i[g-1]=arguments[g];if(e=b.call)j=[0].concat(i);while(c=a.shift()){if(f=b[c])for(g=0,h=f.length;g<h;++g)k=f[g],k.apply(k.__context||this,i),k.__once&&(f.splice(g--,1),h--);if(f&&e){j[0]=c;for(g=0,h=e.length;g<h;++g)k=e[g],k.apply(k.__context||this,j)}}return this},f});