define("emitter",[],function(e,t,n){function s(){}var r=/\s+/,i=Object.keys;return i||(i=function(e){var t=[],n;for(n in e)e.hasOwnProperty(n)&&(t[t.length]=n);return t}),s.prototype.on=function(e,t,n){var i,s,o;if(!t)return this;e=e.split(r),i=this.__callbacks||(this.__callbacks={});while(s=e.shift())o=i[s]||(i[s]=[]),t.__context=n,o[o.length]=t;return this},s.prototype.once=function(e,t,n){var i,s,o;if(!t)return this;e=e.split(r),i=this.__callbacks||(this.__callbacks={});while(s=e.shift())o=i[s]||(i[s]=[]),t.__once=!0,t.__context=n,o[o.length]=t;return this},s.prototype.off=function(e,t,n){var s,o,u,a,f;if(!(s=this.__callbacks))return this;if(!(e||t||n))return delete this.__callbacks,this;e=e.split(r)||i(s);while(o=e.shift()){u=s[o];if(!u)continue;if(!t&&!n){delete s[o];continue}for(a=u.length-1;a;--a)f=u[a],t&&f!==t||n&&f.__context!==n||u.splice(a,1)}return this},s.prototype.emit=function(e){var t,n,i,s,o,u,a=[],f,l;if(!(t=this.__callbacks))return this;e=e.split(r);for(o=arguments.length-1;o;--o)a[o-1]=arguments[o];if(i=t.call)f=[0].concat(a);while(n=e.shift()){if(s=t[n])for(o=0,u=s.length;o<u;++o)l=s[o],l.apply(l.__context||this,a),l.__once&&(s.splice(o--,1),u--);if(s&&i){f[0]=n;for(o=0,u=i.length;o<u;++o)l=i[o],l.apply(l.__context||this,f)}}return this},s});