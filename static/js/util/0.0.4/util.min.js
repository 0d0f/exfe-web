define("util",function(e,t,n){var r=/^\s+/,i=/\s+$/,s=/[^0-9a-zA-Z_\u4e00-\u9fa5\ \'\.]+/g,o=String.prototype.trim,u={zh_CN:s,cut30length:function(e){return e.replace(s," ").substring(0,30)},utf8length:function(e){var t=e.length,n=0,r=0,i;for(;r<t;r++){i=e.charCodeAt(r);if(i<127)n++;else if(i<=2047)n+=2;else if(i<=55295||57344<=i)n+=3;else{if(!(i<=56319))throw"Error: Invalid UTF-16 sequence. Missing high-surrogate code.";i=e.charCodeAt(++r);if(i<56320||57343<i)throw"Error: Invalid UTF-16 sequence. Missing low-surrogate code.";n+=4}}return n},trim:o?function(e){return e===null?"":o.call(e)}:function(e){return e===null?"":e.toString().replace(r,"").replace(i,"")},parseId:function(){function i(i){var s={},o;i=u.trim(i);if(o=i.match(e))s.name=o[1],s.external_identity=o[1]+"@facebook",s.external_username=o[1],s.provider="facebook";else if(o=i.match(t))s.name=o[1]||o[2],s.external_identity="@"+s.name+"@twitter",s.external_username=s.name,s.provider="twitter";else if(n.test(i))s.name=u.cut30length(i.split("@")[0]),s.external_identity=i,s.provider="email";else if(r.test(i)){var a=i.indexOf("<"),f=i.indexOf(">");s.name=u.cut30length(i.substring(0,a).replace(/^"|^'|"$|'$/g,"")),s.external_identity=i.substring(++a,f),s.provider="email"}else s.name=i,s.provider=null;return s}var e=/^([a-z0-9_\.]{1,})@facebook$/i,t=/^@([a-z0-9_]{1,15})$|^@?([a-z0-9_]{1,15})@twitter$/i,n=/^[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,r=/^[^@]*<[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?>$/i;return i}(),tokenRegExp:/token=([a-zA-Z0-9]{32})/,printExtUserName:function(e){var t=e.external_username,n=e.provider;return n==="twitter"?t="@"+t:n==="facebook"&&(t+="@facebook"),t}};return u});