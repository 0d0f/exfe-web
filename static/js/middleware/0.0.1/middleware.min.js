define("middleware",function(e,t,n){var r=e("api"),i=e("store"),s=n.exports={};s.basicAuth=function(e,t,n){if(e.session.checked){n();return}var s=i.get("signin"),o=s&&s.token||!1,u=s&&s.user_id||!1;if(!o){n();return}e.session.user_id=u,e.session.token=o,e.session.checked=!0,r.request("checkAuthorization",{type:"POST",data:{token:o}},function(t){e.session.password=t.password,n()})}});