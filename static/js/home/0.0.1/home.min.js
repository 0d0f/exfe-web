define(function(e){var t=e("jquery");t(function(){function G(){var t=e.height();if(r>t)c=a,v=h,w=y*b,C=x,O=k,D=_;else if(r<=t&&i>t){var n=(t-r)/s;c=a+l*n,v=h+d*n,w=y*b+y*(1-b)*n,C=x+N*n,O=k+A*n,D=M*b+M*(1-b)*n}else c=f,v=p,w=y,C=T,O=L,D=M;u.css({paddingTop:c,paddingBottom:v}),m.width(w).height(w),E=m.position(),g.width(w).height(w).css(E),S.css({paddingTop:C,paddingBottom:O});var o=Math.sin(45*Math.PI/180)*D,P=Math.sin(45*Math.PI/180)*D;B=E.top-(o-w/2)-q,j=E.left-(P-w/2)-q,H.eq(0).css({left:j,top:B}),H.eq(2).css({right:j,bottom:B});var R=Math.sin(30*Math.PI/180)*D,U=Math.cos(30*Math.PI/180)*D;F=E.top+(R+w/2)-q,I=E.left-(U-w/2)-q,H.eq(3).css({left:I,top:F}),H.eq(1).css({right:I,bottom:F})}function Y(){R=setInterval(function(){W++,W===z&&(W=0),(X=W-1)<0&&(X=z-1),et(X),tt(W)},6765)}function Z(){clearInterval(R),R=null}function et(e){U.eq(e).removeClass("t-fadeIn").addClass("t-fadeOut");if(e===0){g.addClass("hide").removeClass("exfe-scaleOut");return}H.eq(e-1).removeClass("fadeIn").addClass("fadeOut")}function tt(e){U.eq(e).removeClass("hide t-fadeOut").addClass("t-fadeIn");if(e===0){g.removeClass("hide"),setTimeout(function(){g.addClass("exfe-scaleOut")},0);return}H.eq(e-1).removeClass("fadeOut").addClass("fadeIn")}function nt(){var e=document.getElementById("triangle"),t=e.getContext("2d");t.fillStyle="#fff",t.beginPath(),t.moveTo(0,0),t.lineTo(440,35),t.lineTo(880,0),t.fill(),t.closePath()}var e=t(window),n=t(document),r=680,i=980,s=i-r,o=t(".x-home"),u=o.find(".page-header"),a=17,f=77,l=f-a,c,h=64,p=108,d=p-h,v,m=o.find("#js-exfe-toy"),g=o.find(".exfe-toy-shadow"),y=m.width(),b=.8,w,E,S=o.find(".page-footer"),x=64,T=108,N=T-x,C,k=64,L=108,A=L-k,O,M=288,_=M*b,D,P=o.find("div.circles"),H=P.find("div.circle"),B,j,F,I,q=H.eq(0).width()/2,R=null,U=u.find("div.title"),z=U.length,W=0,X=0,V=!1,J=o.find("div.triangle"),K=J.find("#triangle"),Q=K.next();e.data("home",!0),G(),e.resize(function(){G()}),m.addClass("exfe-init").delay(500,"starter").delay(500,"show-title").delay(233,"show-circles").delay(233,"show-start").delay(233,"show-triangle").delay(233,"ender").queue("starter",function(e){m.addClass("exfe-scaleOn"),m.dequeue("show-title"),nt()}).queue("show-title",function(e){u.animate({opacity:1},1e3),m.dequeue("show-circles")}).queue("show-circles",function(e){P.animate({opacity:1},1e3),m.dequeue("show-start")}).queue("show-start",function(e){S.animate({opacity:1},1e3),m.dequeue("show-triangle")}).queue("show-triangle",function(e){t("#triangle").animate({top:0},1e3),m.dequeue("ender")}).queue("ender",function(){R&&Z(R),Y(),U.eq(0).addClass("t-fadeIn").nextAll().addClass("t-fadeOut").removeClass("hide"),V=!0}).dequeue("starter"),n.off("hover.home","#js-exfe-toy, div.circle").on("hover.home","#js-exfe-toy, div.circle",function(e){if(!V)return;Z();var n=t(this),r=e.type==="mouseenter",i=n.index("div.circle");i===-1?i=0:i++;if(r){if(i===W)return;et(W),W=i,tt(W)}else R||Y()}),n.off("click.home").on("click.home",function(e){var n=t(e.target);if(!V)return;!n.hasClass("gather-wrapper")&&!n.parent().hasClass("gather-wrapper")&&!n.hasClass("triangle")&&!n.parent().hasClass("triangle")&&!n.hasClass("exfe-toy")&&!n.hasClass("modal")&&!t(".modal").size()&&!n.hasClass("hmb")&&(Q.removeClass("hide"),K.removeClass("trifio").delay(13,"trifio").queue("trifio",function(){K.addClass("trifio")}).dequeue("trifio"))}).on("click.home",".x-home .modal-backdrop",function(){t(".sign-in").data("dialog").hide()}).on("click.home",".x-home .triangle, .x-home .exfe-toy",function(e){Q.hasClass("hide")&&Q.removeClass("hide");var n={options:{onHideAfter:function(){this.$(".modal-body").eq(0).css("opacity",1),this.switchTabType="d00",this._oauth_&&this._oauth_.abort();var e=this.element;this.offSrcNode(),this.destory(),e.remove(),t(".popmenu").remove(),t("#js-modal-backdrop").addClass("hide").css("opacity",0),K.css({opacity:.3})},backdrop:!1,viewData:{cls:"modal-id home-dialog"}}};t(".sign-in").data("dialog-settings",n),t(".sign-in").trigger("click.dialog.data-api"),t(".sign-in").data("dialog-settings",null),Q.addClass("hide"),K.animate({opacity:0},500),t(".modal-backdrop").removeClass("hide").animate({opacity:1},1e3),t(".popmenu").addClass("hide"),t(".modal-id").css("top",m.offset().top-(t(".modal-id").height()-m.height())/2).animate({opacity:1},233,function(){t("#identity").focus(),K.css({opacity:0})})})})});