define(function(e){var t=e("jquery");t(function(){function V(){var t=e.height();if(r>t)c=a,m=d*v,S=b,C=x,A=L;else if(r<=t&&i>t){var n=(t-r)/s;c=a+l*n,m=d*v+d*(1-v)*n,S=b+E*n,C=x+N*n,A=k*v+k*(1-v)*n}else c=f,m=d,S=w,C=T,A=k;u.css({paddingTop:c}),h.width(m).height(m),g=h.position(),p.width(m).height(m).css(g),y.css({paddingTop:S,paddingBottom:C});var o=Math.sin(45*Math.PI/180)*A,O=Math.sin(45*Math.PI/180)*A;_=g.top-(o-m/2)-B,D=g.left-(O-m/2)-B,M.eq(0).css({left:D,top:_}),M.eq(2).css({right:D,bottom:_});var j=Math.sin(30*Math.PI/180)*A,F=Math.cos(30*Math.PI/180)*A;P=g.top+(j+m/2)-B,H=g.left-(F-m/2)-B,M.eq(3).css({left:H,top:P}),M.eq(1).css({right:H,bottom:P})}function J(){j=setInterval(function(){q++,q===I&&(q=0),(R=q-1)<0&&(R=I-1),Q(R),G(q)},6765)}function K(){clearInterval(j),j=null}function Q(e){F.eq(e).removeClass("t-fadeIn").addClass("t-fadeOut");if(e===0){p.addClass("hide").removeClass("exfe-scaleOut");return}M.eq(e-1).removeClass("fadeIn").addClass("fadeOut")}function G(e){F.eq(e).removeClass("hide t-fadeOut").addClass("t-fadeIn");if(e===0){p.removeClass("hide"),setTimeout(function(){p.addClass("exfe-scaleOut")},0);return}M.eq(e-1).removeClass("fadeOut").addClass("fadeIn")}function Y(){var e=document.getElementById("triangle"),t=e.getContext("2d");t.fillStyle="#fff",t.beginPath(),t.moveTo(0,0),t.lineTo(440,35),t.lineTo(880,0),t.fill(),t.closePath()}var e=t(window),n=t(document),r=680,i=980,s=i-r,o=t(".x-home"),u=o.find(".page-header"),a=40,f=140,l=f-a,c,h=o.find("#js-exfe-toy"),p=o.find(".exfe-toy-shadow"),d=h.width(),v=.8,m,g,y=o.find(".page-footer"),b=64,w=108,E=w-b,S,x=60,T=132,N=T-x,C,k=288,L=k*v,A,O=o.find("div.circles"),M=O.find("div.circle"),_,D,P,H,B=M.eq(0).width()/2,j=null,F=u.find("div.title"),I=F.length,q=0,R=0,U=!1,z=o.find("div.triangle"),W=z.find("#triangle"),X=W.next();e.data("home",!0),V(),e.resize(function(){V()}),h.addClass("exfe-init").delay(500,"starter").delay(500,"show-title").delay(233,"show-circles").delay(233,"show-start").delay(233,"show-triangle").delay(233,"ender").queue("starter",function(e){h.addClass("exfe-scaleOn"),h.dequeue("show-title"),Y()}).queue("show-title",function(e){u.animate({opacity:1},1e3),h.dequeue("show-circles")}).queue("show-circles",function(e){O.animate({opacity:1},1e3),h.dequeue("show-start")}).queue("show-start",function(e){y.animate({opacity:1},1e3),h.dequeue("show-triangle")}).queue("show-triangle",function(e){t("#triangle").animate({top:0},1e3),h.dequeue("ender")}).queue("ender",function(){j&&K(j),J(),F.eq(0).addClass("t-fadeIn").nextAll().addClass("t-fadeOut").removeClass("hide"),U=!0}).dequeue("starter"),n.off("hover.home","#js-exfe-toy, div.circle").on("hover.home","#js-exfe-toy, div.circle",function(e){if(!U)return;K();var n=t(this),r=e.type==="mouseenter",i=n.index("div.circle");i===-1?i=0:i++;if(r){if(i===q)return;Q(q),q=i,G(q)}else j||J()}),n.off("click.home").on("click.home",function(e){var n=t(e.target);if(!U)return;!n.hasClass("gather-wrapper")&&!n.parent().hasClass("gather-wrapper")&&!n.hasClass("triangle")&&!n.parent().hasClass("triangle")&&!n.hasClass("exfe-toy")&&!n.hasClass("modal")&&!t(".modal").size()&&!n.hasClass("hmb")&&(X.removeClass("hide"),W.removeClass("trifio").delay(13,"trifio").queue("trifio",function(){W.addClass("trifio")}).dequeue("trifio"))}).on("click.home",".x-home .modal-backdrop",function(){t(".sign-in").data("dialog").hide()}).on("click.home",".x-home .triangle, .x-home .exfe-toy",function(e){X.hasClass("hide")&&X.removeClass("hide");var n={options:{onHideAfter:function(){this.$(".modal-body").eq(0).css("opacity",1),this.switchTabType="d00",this._oauth_&&this._oauth_.abort();var e=this.element;this.offSrcNode(),this.destory(),e.remove(),t(".popmenu").remove(),t("#js-modal-backdrop").addClass("hide").css("opacity",0),W.css({opacity:.3,top:0,width:"880px"})},backdrop:!1,viewData:{cls:"modal-id home-dialog"}}};t(".sign-in").data("dialog-settings",n),t(".sign-in").trigger("click.dialog.data-api"),t(".sign-in").data("dialog-settings",null),X.addClass("hide"),W.animate({opacity:0,top:500,width:"440px"},500),t(".modal-backdrop").removeClass("hide").animate({opacity:1},1e3),t(".modal-id").animate({opacity:1},1e3,function(){W.css({opacity:0,top:0,width:"880px"})})})})});