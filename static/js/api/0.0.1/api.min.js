define("api",[],function(e,t,n){function a(e,t){return function(){var r=l(arguments),i=r[0];return i&&i.meta.code===200?(r[0]=i.response,e&&e.apply(this,r)):t&&t.apply(this,r),this}}function l(e){return f.call(e,0)}function c(e,t){var n;for(n in t)e[n]=t[n];return e}function p(e,t,n){var i={},s;return c(i,h),c(i,e),s=r.ajax(i).done(t).fail(n),s}var r=e("jquery"),i=e("config"),s={base_url:i.api_url,signin:"/users/signin",getRegistrationFlag:"/users/getRegistrationFlag",checkAuthorization:"/users/checkAuthorization",getUser:"/users/:user_id",signout:"",updateUser:"/users/update",setPassword:"/users/:user_id/setPassword",crosses:"/users/:user_id/crosses",crosslist:"/users/:user_id/crosslist",addIdentity:"/users/addIdentity",deleteIdentity:"/users/deleteIdentity",setDefaultIdentity:"/users/setDefaultIdentity",getIdentityById:"/identities/:identity_id",complete:"/identities/complete",getIdentity:"/identities/get",updateIdentity:"/identities/:identity_id/update",getCross:"/crosses/:cross_id",gather:"/crosses/gather",editCross:"/crosses/:cross_id/edit",rsvp:"/exfee/:exfee_id/rsvp",editExfee:"/exfee/:exfee_id/edit",conversation:"/conversation/:exfee_id",addConversation:"/conversation/:exfee_id/add",verifyIdentity:"/users/verifyIdentity",verifyUserIdentity:"/users/verifyUserIdentity",forgotPassword:"/users/forgotPassword",avatarUpdate:"/avatar/update",getCrossByInvitationToken:"/crosses/getCrossByInvitationToken",followExfe:"/oauth/followExfe"},o="signin getRegistrationFlag checkAuthorization verifyIdentity verifyUserIdentity forgotPassword getIdentityById getCrossByInvitationToken",u={_token:null,setToken:function(e){this._token=e},getToken:function(){return this._token},request:function(e,t,n,i){var f=s[e],l,c=t.params,h=t.resources;if(!f)return;if(o.split(" ").indexOf(e)===-1){if(!u._token)return;c||(c={}),c.token=u._token}c&&(c=r.param(c),f+=c?"?"+c:"");if(h)for(l in h)f=f.replace(":"+l,encodeURIComponent(h[l]));return t.url=s.base_url+f,delete t.params,delete t.resources,p(t,a(n,i),i)}},f=Array.prototype.slice,h={type:"GET",dataType:"JSON",xhrFields:{withCredentials:!0}};return u});