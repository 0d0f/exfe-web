define("api",[],function(a,b,c){function i(a,b){return function(){var d=k(arguments),e=d[0];return e&&e.meta.code===200?(d[0]=e.response,a&&a.apply(this,d)):b&&b.apply(this,d),this}}function k(a){return j.call(a,0)}function l(a,b){var c;for(c in b)a[c]=b[c];return a}function n(a,b,c){var e={},f;return l(e,m),l(e,a),f=d.ajax(e).done(b).fail(c),f}var d=a("jquery"),e=a("config"),f={base_url:e.api_url,signin:"/users/signin",getRegistrationFlag:"/users/getRegistrationFlag",checkAuthorization:"/users/checkAuthorization",getUser:"/users/:user_id",signout:"",updateUser:"/users/update",setPassword:"/users/:user_id/setPassword",crosses:"/users/:user_id/crosses",crosslist:"/users/:user_id/crosslist",addIdentity:"/users/addIdentity",deleteIdentity:"/users/deleteIdentity",setDefaultIdentity:"/users/setDefaultIdentity",getIdentityById:"/identities/:identity_id",complete:"/identities/complete",getIdentity:"/identities/get",updateIdentity:"/identities/:identity_id/update",getCross:"/crosses/:cross_id",gather:"/crosses/gather",editCross:"/crosses/:cross_id/edit",rsvp:"/exfee/:exfee_id/rsvp",editExfee:"/exfee/:exfee_id/edit",conversation:"/conversation/:exfee_id",addConversation:"/conversation/:exfee_id/add",verifyIdentity:"/users/verifyIdentity",verifyUserIdentity:"/users/verifyUserIdentity",forgotPassword:"/users/forgotPassword",avatarUpdate:"/avatar/update",getCrossByInvitationToken:"/crosses/getCrossByInvitationToken"},g="signin getRegistrationFlag checkAuthorization verifyIdentity verifyUserIdentity forgotPassword getIdentityById getCrossByInvitationToken",h={_token:null,setToken:function(a){this._token=a},getToken:function(){return this._token},request:function(a,b,c,e){var j=f[a],k,l=b.params,m=b.resources;if(!j)return;if(g.split(" ").indexOf(a)===-1){if(!h._token)return;l||(l={}),l.token=h._token}l&&(l=d.param(l),j+=l?"?"+l:"");if(m)for(k in m)j=j.replace(":"+k,encodeURIComponent(m[k]));return b.url=f.base_url+j,delete b.params,delete b.resources,n(b,i(c,e),e)}},j=Array.prototype.slice,m={type:"GET",dataType:"JSON",xhrFields:{withCredentials:!0}};return h});