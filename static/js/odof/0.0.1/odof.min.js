define("odof",[],function(e,t,n){function h(e,t){"/"===e[0]&&0!==e.indexOf(l)&&(e=l+e);var n=e.indexOf("?");this.canonicalPath=e,this.path=e.replace(l,"")||"/",this.title=document.title,this.state=t||{},this.state.path=e,this.querystring=~n?e.slice(n+1):"",this.pathname=~n?e.slice(0,n):e,this.params=[]}function p(e,t){t=t||{},this.path=e,this.regexp=v(e,this.keys=[],t.sensitive,t.strict)}function d(e,t){function n(){t.apply(e,arguments)}return n}function v(e,t,n,r){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(r?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,r,i,s,o){return t.push({name:i,optional:!!o}),n=n||"",""+(o?"":n)+"(?:"+(o?n:"")+(r||"")+(s||r&&"([^/.]+?)"||"([^/]+?)")+")"+(o||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",n?"":"i"))}function m(e,t){if(e&&t)for(var n in t)e[n]=t[n];return e}var r=e("emitter"),i={},s=(window.history!==null?window.history.pushState:void 0)!==null,o=/^#*/,u=/:([\w\d]+)/g,a=/\*([\w\d]+)/g,f=/[-[\]{}()+?.,\\^$|#\s]/g,l="";i.createApplication=function(){function e(){}return m(e,c),m(e,r.prototype),e.init(),e};var c={};c.getPath=function(){var e=window.location.pathname;return e.substr(0,1)!=="/"&&(e="/"+e),e},c.getHash=function(){return window.location.hash},c.getFragment=function(){return this.getHash().replace(o,"")},c.getHost=function(){return(document.location+"").replace(this.getPath()+this.getHash(),"")},c.basePath=function(e){if(0===arguments.length)return l;l=e},c.start=function(){s?window.addEventListener("popstate",d(this,this.change),!1):window.addEventListener("hashchange",d(this,this.change),!1)},c.change=function(e){var t=this.getFragment();if(t===this.fragment)return;this.replace(window.location.pathname+window.location.hash+window.location.search,e.state)},c.stop=function(){s?window.removeEventListener("popstate",d(this,this.change)):window.removeEventListener("hashchange",d(this,this.change))},c.init=function(){var e=this;this._dispatch=!0,this.callbacks=[],this.start()},c.get=function(e,t){if("function"==typeof t){var n=new p(e);for(var r=1,i=arguments.length;r<i;++r)this.callbacks.push(n.middleware(arguments[r]))}},c.dispatch=function(e){function r(){var i=t.callbacks[n++];if(!i)return t.unhandled(e);i(e,r)}var t=this,n=0;r()},c.unhandled=function(e){},c.replace=function(e,t,n,r){var i=new h(e,t);return i.init=n,r||(this._dispatch=!0),this._dispatch&&this.dispatch(i),this.fragment=this.getFragment(),i},c.run=function(e){e=e||{};if(this.running)return;this.running=!0,!1===e.dispatch&&(this._dispatch=!1);if(!this._dispatch)return;this.replace(window.location.pathname+window.location.hash+window.location.search,null,!0,this._dispatch)},p.prototype.middleware=function(e){var t=this;return function(n,r){if(t.match(n.path,n.params))return e(n,r);r()}},p.prototype.match=function(e,t){var n=this.keys,r=e.indexOf("?"),i=~r?e.slice(0,r):e,s=this.regexp.exec(i);if(!s)return!1;for(var o=1,u=s.length;o<u;++o){var a=n[o-1],f="string"==typeof s[o]?decodeURIComponent(s[o]):s[o];a?t[a.name]=undefined!==t[a.name]?t[a.name]:f:t.push(f)}return!0};var g=Array.prototype.slice;n.exports=i});