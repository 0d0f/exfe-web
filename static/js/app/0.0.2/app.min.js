define(function(e,t,n){var r=e("config"),i=e("handlebars"),s=e("middleware"),o=e("routes"),u=e("lightsaber"),a=u();a.use(s.basicAuth),a.initRouter(),a.use(s.errorHandler),a.set("timestamp",r.timestamp),a.set("view cache",!0),a.set("view engine",i),a.set("views","/static/views"),a.get("/+#?",o.index),a.get("/#gather",o.refreshAuthUser,o.gather),a.get(/^\/#token=([a-zA-Z0-9]{64})$/,o.resolveToken,o.resolveRequest,o.resolveShow),a.get(/^\/#!([1-9][0-9]*)$/,o.refreshAuthUser,o.cross),a.get(/^\/#!([1-9][0-9]*)\/([a-zA-Z0-9]{3})$/,o.refreshAuthUser,o.crossInvitation),a.get(/^\/#!token=([a-zA-Z0-9]{32})$/,o.refreshAuthUser,o.crossToken),a.get(/^\/#!token=([a-zA-Z0-9]{32})\/(accept)\/?$/,o.refreshAuthUser,o.crossToken),a.get(/^\/#([^@\/\s\!=]+)?@([^@\/\s]+)(?:\/?(.*))$/,o.refreshAuthUser,o.profile),a.get(/^\/#invalid\/token=([a-zA-Z0-9]{64)$/,o.invalid),a.get("/#signout",o.signout),a.run(),window.App=a});