define(function(e,t,n){var r=e("config"),i=e("handlebars"),s=e("middleware"),o=e("routes"),u=e("lightsaber"),a=u();a.use(s.basicAuth),a.initRouter(),a.use(s.errorHandler),a.set("timestamp",r.timestamp),a.set("view cache",!0),a.set("view engine",i),a.set("views","/static/views"),a.get("/+#?",o.index),a.get("/#gather",o.gather),a.get(/^\/#token=([a-zA-Z0-9]{32})$/,o.resolveToken),a.get(/^\/#!([1-9][0-9]*)$/,o.cross),a.get(/^\/#!token=([a-zA-Z0-9]{32})$/,o.crossToken),a.get(/^\/#([^@\/\s\!=]+)?@([^@\/\s]+)(?:\/?(.*))$/,o.profile),a.get(/^\/#invalid\/token=([a-zA-Z0-9]{32})$/,o.invalid),a.run()});